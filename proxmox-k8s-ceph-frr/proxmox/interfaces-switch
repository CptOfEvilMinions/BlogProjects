# network interface settings; autogenerated
# Please do NOT modify this file directly, unless you know what
# you're doing.
#
# If you want to manage parts of the network configuration manually,
# please utilize the 'source' or 'source-directory' directives to do
# so.
# PVE will preserve these directives, but will NOT read its network
# configuration from sourced files, so do not attempt to move any of
# the PVE managed interfaces into external files!

auto lo
iface lo inet loopback

auto eno1
iface eno1 inet manual
	mtu 9000
#Ceph 10GB

auto eno2
iface eno2 inet manual

auto eno3
iface eno3 inet manual

auto eno4
iface eno4 inet manual

auto bond0
iface bond0 inet manual
	bond-slaves eno3 eno4
	bond-miimon 100
	bond-mode 802.3ad
	bond-xmit-hash-policy layer2+3

auto vmbr1
iface vmbr1 inet static
	address {{ ansible_host }}/24
	gateway {{ ansible_default_ipv4["gateway"] }}
	bridge-ports bond0
	bridge-stp off
	bridge-fd 0
	bridge-vlan-aware yes
	bridge-vids 2-4094

auto vmbr30
iface vmbr30 inet manual
	bridge-ports eno1
	bridge-stp off
	bridge-fd 0
	bridge-vlan-aware yes
	bridge-vids 2-4094
	mtu 9000

auto vmbr30.800
iface vmbr30.800 inet static
	address {{ ceph_cluster_net }}.{{ network_entity_titles[inventory_hostname]["id"] }}/24
	mtu 9000

auto vmbr30.801
iface vmbr30.801 inet static
	address {{ ceph_public_net }}.{{ network_entity_titles[inventory_hostname]["id"] }}/24
	mtu 9000

source /etc/network/interfaces.d/*
